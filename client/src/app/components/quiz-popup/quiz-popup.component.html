<div class="quiz-container">

    <div *ngIf="!gameService.quizStarted && gameService.timerStarted" class="timer">
        <p>Le quiz commencera dans <strong>{{ gameService.timeLeft }}</strong> secondes...</p>
    </div>

    <h1 *ngIf="gameService.quizStarted && !gameService.showStepTitle">Quiz interactif</h1>

    <!-- Étape 1 : QCM -->
    <div *ngIf="gameService.quizStarted && gameService.quizSteps[gameService.currentStepIndex]?.type === 'qcm' && !gameService.showStepTitle">
        <h3>{{ gameService.questions[gameService.currentQuestionIndex]?.text }}</h3>
        <div class="options-column">
            <button *ngFor="let option of gameService.questions[gameService.currentQuestionIndex]?.options"
                [class.selected]="gameService.selectedAnswer === option.text && !gameService.questions[gameService.currentQuestionIndex].answered"
                [class.correct]="gameService.questions[gameService.currentQuestionIndex].answered && option.correct"
                [class.incorrect]="gameService.questions[gameService.currentQuestionIndex].answered && !option.correct"
                [disabled]="gameService.questions[gameService.currentQuestionIndex].answered" (click)="gameService.onOptionSelect(option.text)"
                class="toggle-button">
                {{ option.text }}
            </button>
        </div>
    </div>

    <!-- Étape 2 : Réponse Interactive -->
    <div *ngIf="gameService.currentStep?.type === 'interactive' && !gameService.showStepTitle">
        <h3>{{ gameService.currentStep.questions[gameService.currentQuestionIndex]?.text }}</h3>
        <div class="interactive-options">
            {{ gameService.selectedAnswer }}
        </div>
    </div>


    <div *ngIf="gameService.quizStarted && !gameService.showStepTitle" class="quiz-footer">
        <button (click)="gameService.endQuiz()" class="quit-button"> <i class="fa-solid fa-door-open"></i> Quitter</button>
        <button (click)="gameService.validateAnswer()" class="button">{{ gameService.buttonText }}</button>
    </div>
    <h4 *ngIf="gameService.quizStarted && !gameService.showStepTitle">Question {{ gameService.currentQuestionIndex + 1 }} sur {{ gameService.questions.length }}</h4>
</div>